(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/baseline-play_circle_filled-24px.69e0d645.svg"},function(e,t,a){e.exports=a.p+"static/media/baseline-keyboard_arrow_left-24px.5434740c.svg"},,function(e,t,a){e.exports=a(26)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(8),o=a.n(i),c=(a(18),a(1)),s=a(2),l=a(4),u=a(3),m=a(5),v="/movie/now_playing",h="/genre/movie/list",d="/search/movie",f="/movie/{movie_id}/videos",p="/movie/{movie_id}/reviews",g="/movie/{movie_id}/similar",E=[],N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={};if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).includeCanceler){E.map(function(e){return e.abort()});var n=function(){var e=new AbortController;return E.push(e),e.signal}();a.signal=n}(function(e){for(var t,a=/\{(.*?)\}/g,n=[];t=a.exec(e);)n.push({stringToReplace:t[0],param:t[1]});return n})(e).forEach(function(a){t[a.param]?(e=e.replace(a.stringToReplace,t[a.param]),delete t[a.param]):console.error("parameter: '".concat(a.param,"' is required on request: ").concat(e))}),t.api_key="bc50218d91157b1ba4f142ef7baaa6a0";var r=function(e){return Object.keys(e).map(function(t,a){return"".concat(t,"=").concat(e[t])}).join("&")}(t);return fetch("".concat("https://api.themoviedb.org/3").concat(e,"?").concat(r),a).then(function(e){return e.json()}).catch(function(e){return e.json()})},b=function(e){var t=e.page;return N(v,{page:t})},S=function(e){var t=e.query,a=e.page;return N(d,{query:t,page:a},{includeCanceler:!0})},y=function(e){var t=e.movie_id,a=e.page;return N(g,{movie_id:t,page:a})},w=a(6),O=a(11),k=(a(19),"GENRE_LIST_RECEIVED"),j=new function e(){var t=this;Object(c.a)(this,e),this.emit=function(e,a,n){n&&console.log(e,a),t.data[e]=a,null!=t.emitters[e]&&t.emitters[e].map(function(e){return e(a)})},this.onStoreChange=function(e,a){return t.emitters[e]||(t.emitters[e]=[]),t.emitters[e].push(a),t.data[e]&&a(t.data[e]),t.data[e]},this.destroyStore=function(e){delete t.emitters[e]},this.emitters={},this.data={}},R=function(){function e(t){Object(c.a)(this,e),this.setPosition(t)}return Object(s.a)(e,[{key:"setPosition",value:function(e){var t=e.top,a=e.bottom,n=e.right,r=e.left,i=e.width,o=e.height;this.top=t,this.bottom=a,this.right=n,this.left=r,this.width=i,this.height=o}}]),e}(),_=function(){function e(t){Object(c.a)(this,e);var a=t.backdrop_path,n=t.genre_ids,r=t.id,i=t.title,o=t.vote_average,s=t.overview,l=t.release_date,u=t.poster_path;this.data=t,this.backdropPath=null!=a?a:u,this.genreIds=n,this.id=r,this.title=i,this.voteAverage=o,this.overview=s,this.releaseDate=l,this.posterPath=u}return Object(s.a)(e,[{key:"getCover",value:function(){return"https://image.tmdb.org/t/p/w1400_and_h450_face/".concat(this.backdropPath)}},{key:"getMdPoster",value:function(){return"https://image.tmdb.org/t/p/w500_and_h282_face/".concat(this.backdropPath)}},{key:"getPreviewPoster",value:function(){return"https://image.tmdb.org/t/p/w116_and_h174_face/".concat(this.posterPath)}},{key:"getOverviewDesc",value:function(){var e=this.overview&&this.overview.length>50?"...":"";return(this.overview&&this.overview.substring(0,50))+e}},{key:"getHumanDate",value:function(){return this.releaseDate}}]),e}(),P=function(){return r.a.createElement("div",{className:"mv-masonry-grid mv-masonry-sm"},r.a.createElement("div",{className:"mv-card  mv-card-sm mv-card-ghost"},r.a.createElement("div",{className:"mv-card-poster"}),r.a.createElement("div",{className:"mv-card-content"},r.a.createElement("div",{className:"title"}),r.a.createElement("div",{className:"genre"})),r.a.createElement("div",{className:"mv-card-footer"})))},M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={genreNames:[]},a.handleCardClick=function(e){a.props.onMovieSelect(a.props.movie,a.getOffset(e.currentTarget))},a.getOffset=function(e){var t=e.getBoundingClientRect();return new R({top:t.top,left:t.left,right:t.left+e.offsetWidth,bottom:t.top+e.offsetHeight,width:e.offsetWidth,height:e.offsetHeight})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.onStoreChange(k,function(t){e.setGenreNames(t)})}},{key:"setGenreNames",value:function(e){var t=this.props.movie.genreIds,a=e.filter(function(e){return t.includes(e.id)}).map(function(e){return e.name});this.setState({genreNames:a})}},{key:"render",value:function(){var e=this.props,t=e.size,a=e.movie,n=this.state.genreNames.join(", ");return r.a.createElement("div",{className:"mv-masonry-grid mv-masonry-".concat(t),title:a.overview},r.a.createElement("div",{onClick:this.handleCardClick,className:"mv-card  mv-card-".concat(t)},r.a.createElement("div",{className:"mv-card-poster",style:{backgroundImage:"url(".concat(a.getMdPoster(),")")}}),r.a.createElement("div",{className:"mv-card-content"},r.a.createElement("div",{className:"title"},a.title),r.a.createElement("div",{className:"genre"},n),r.a.createElement("div",{className:"overview"},a.getOverviewDesc())),r.a.createElement("div",{className:"mv-card-footer"},r.a.createElement("div",{className:"md-block-left"},a.getHumanDate()),r.a.createElement("div",{className:"md-block-right text-right"},"Rate: ",a.voteAverage))))}}]),t}(n.Component),C=function(){function e(t){var a=t.author,n=t.content,r=t.id,i=t.url;Object(c.a)(this,e),this.author=a,this.content=n,this.id=r,this.url=i}return Object(s.a)(e,[{key:"getReviewDescription",value:function(){return this.content&&this.content.substring(0,250)}},{key:"canShowMore",value:function(){return this.content&&this.content.length>250}}]),e}(),I=(a(20),function(){return r.a.createElement("div",{className:"md-paragraph movie-review ghost"},r.a.createElement("div",{className:"movie-review-author"}),r.a.createElement("div",{className:"movie-review-content"}))}),T=function(e){var t=e.review,a=t.author,n=t.url,i=e.review;return r.a.createElement("div",{className:"md-paragraph movie-review"},r.a.createElement("div",{className:"movie-review-author"},r.a.createElement("i",null," ",a)),r.a.createElement("div",{className:"movie-review-content"},i.getReviewDescription(),i.canShowMore()?r.a.createElement("a",{href:n,rel:"noopener noreferrer",target:"_blank"},"..."):null))},L=0,A=1,x=2,D=3,V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={viewState:null,reviews:null},a.renderLoading=function(){return r.a.createElement("div",{className:"md-paragraph"},r.a.createElement(I,null))},a.renderError=function(){return r.a.createElement("div",{className:"md-paragraph"},"Server error..")},a.renderNoResults=function(){return r.a.createElement("div",{className:"md-paragraph"},"No reviews found for this movie.")},a.renderNormal=function(){var e=a.state.reviews;return r.a.createElement(r.a.Fragment,null,e?e.map(function(e){return r.a.createElement(T,{key:e.id,review:e})}):null)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;this.setState({viewState:L}),(e=this.props.movieId,N(p,{movie_id:e})).then(function(e){e.total_results>0?t.setState({viewState:x,reviews:e.results.map(function(e){return new C(e)})}):t.setState({viewState:D})}).catch(function(e){console.log(e),t.setState({viewState:A})})}},{key:"render",value:function(){var e=this.state.viewState;return e===L?this.renderLoading():e===D?this.renderNoResults():e===A?this.renderError():e===x?this.renderNormal():void 0}}]),t}(n.Component),F=(a(21),a(9)),Q=a.n(F),W=function(){function e(t){Object(c.a)(this,e);var a=t.id,n=t.key,r=t.site,i=t.type;this.id=a,this.type=i,this.site=r,this.key=n}return Object(s.a)(e,[{key:"isYouTubeVideo",value:function(){return"YouTube"===this.site}},{key:"isVimeoVideo",value:function(){return"Vimeo"===this.site}},{key:"getTrailerLink",value:function(){return this.isYouTubeVideo()?"https://www.youtube.com/watch?v=".concat(this.key):this.isVimeoVideo()?"https://vimeo.com/".concat(this.key):void 0}},{key:"getTrailerThumb",value:function(){return this.isYouTubeVideo()?"http://i3.ytimg.com/vi/".concat(this.key,"/hqdefault.jpg"):this.isVimeoVideo()?"http://b.vimeocdn.com/ts/487/543/".concat(this.key,".jpg"):void 0}}]),e}(),G=function(){return r.a.createElement("div",{className:"movie-trailer ghost"})},H=function(e){var t=e.trailer;return r.a.createElement("div",{className:"movie-trailer",style:{backgroundImage:"url(".concat(t.getTrailerThumb(),")")}},r.a.createElement("div",{className:"overlay"}),r.a.createElement("div",{className:"content"},r.a.createElement("a",{href:t.getTrailerLink(),target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{src:Q.a,alt:"play video"}))))},Y=(a(22),0),q=1,U=2,z=3,B=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={viewState:null,trailers:null,trailerToShowIndex:2,canShowMore:!1},a.showAll=function(){var e={canShowMore:!1,trailerToShowIndex:a.state.trailers.length};a.setState(e)},a.renderLoading=function(){return r.a.createElement(G,null)},a.renderNormal=function(){var e=a.state,t=e.trailers,n=e.canShowMore,i=e.trailerToShowIndex;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"movie-trailer-container"},t?t.slice(0,i).map(function(e){return r.a.createElement(H,{trailer:e,key:e.id})}):null),r.a.createElement("div",{className:"clear-fix"}),r.a.createElement("div",{className:"md-container"},n?r.a.createElement("button",{className:"md-button-primary",onClick:a.showAll},"Show all"):null))},a.renderError=function(){return r.a.createElement("div",{className:"md-paragraph"},"Server error")},a.renderNoResults=function(){return r.a.createElement("div",{className:"md-paragraph"},"No video trails for this movie")},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;this.setState({viewState:Y}),(e=this.props.movieId,N(f,{movie_id:e})).then(function(e){return e.results&&0===e.results.length?t.setState({viewState:z}):(e.results&&e.results.length>t.state.trailerToShowIndex&&(a=!0),t.setState({viewState:U,trailers:e.results.map(function(e){return new W(e)}),canShowMore:a}));var a}).catch(function(e){return t.setState({viewState:q})})}},{key:"render",value:function(){var e=this.state.viewState;return e===Y?this.renderLoading():e===z?this.renderNoResults():e===q?this.renderError():e===U?this.renderNormal():void 0}}]),t}(n.Component),J=a(10),K=a.n(J),X=(a(23),{top:0,bottom:0,right:0,left:0,width:"100vw",height:"100vh"}),Z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={position:null,starterPosition:null,movie:null,isFullScreen:!1},a.timerAnimationIn=null,a.timerAnimationOut=null,a.handleClose=function(e){a.setState({position:a.state.starterPosition,isFullScreen:!1}),a.timerAnimationOut=setTimeout(function(){return a.props.onMovieDetailsClose()},200)},a.handleOnScroll=function(e){var t=e.currentTarget;t.scrollHeight-t.scrollTop===t.clientHeight&&a.movieList&&a.movieList.getNextPage()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({starterPosition:this.props.starterPosition,position:this.props.starterPosition,movie:this.props.movie}),this.timerAnimationIn=setTimeout(function(){return e.setState({position:new R(X),isFullScreen:!0})})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timerAnimationIn),clearTimeout(this.timerAnimationOut)}},{key:"render",value:function(){var e=this,t=this.state,a=t.position,n=t.movie,i=t.isFullScreen,o=n.getCover(),c=n.getPreviewPoster();return r.a.createElement("div",{style:a,className:"mv-details-container"},r.a.createElement("div",{className:"md-page-container",onScroll:this.handleOnScroll},r.a.createElement("div",{className:"mv-details-header"},r.a.createElement("div",{className:"md-container"},r.a.createElement("button",{className:"md-button",onClick:this.handleClose},r.a.createElement("img",{src:K.a,alt:"back"})),r.a.createElement("div",{className:"mv-details-header-title"},n.title))),r.a.createElement("div",{className:"mv-details-poster",style:{backgroundImage:"url(".concat(o,")")}}),r.a.createElement("div",{className:"md-container mv-details-content-card"},r.a.createElement("div",{className:"mv-details-movie-content ".concat(i?"show":"hide")},r.a.createElement("div",{className:"md-container no-gutters"},r.a.createElement("div",{className:"poster-preview-container"},r.a.createElement("img",{src:c,alt:n.title})),r.a.createElement("div",{className:"md-title"},n.title),r.a.createElement("div",{className:"md-sub-title"},"Overview"),r.a.createElement("div",{className:"md-paragraph"},n.overview),r.a.createElement("div",{className:"md-paragraph sub-info"},n.getHumanDate(),", Rating ",n.voteAverage),r.a.createElement("div",{className:"md-sub-title"},"Trailers"),r.a.createElement("div",{className:"horizontal-container"},r.a.createElement(B,{movieId:n.id})),r.a.createElement("div",{className:"md-sub-title"},"Reviews"),r.a.createElement("div",null,r.a.createElement(V,{movieId:n.id})),r.a.createElement("div",{className:"md-sub-title"},"Similar movies")),r.a.createElement(ne,{fetchType:$.SIMILAR_MOVIES,fetchFunc:y,fetchParams:{movie_id:n.id},onRef:function(t){return e.movieList=t}})))))}}]),t}(n.Component),$={SEARCH:"SEARCH",NOW_PLAYING:"NOW_PLAYING",SIMILAR_MOVIES:"SIMILAR_MOVIES"},ee={NORMAL_VIEW:0,LOADING:1,SERVER_ERROR:4,NO_RESULTS:5},te={viewState:ee.NOW_PLAYING_VIEW,currentPage:1,totalPages:null,totalResults:null,query:"",similarMovieId:null,movies:[],selectedMovie:null,selectedMoviePosition:null},ae=["lg","sm","sm","sm","sm","sm","md"],ne=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state=te,a.fetchDate=function(){a.setState({viewState:ee.LOADING});var e=Object(O.a)({},a.props.fetchParams,{page:a.state.currentPage});a.props.fetchFunc(e).then(a.handleFetchSuccess).catch(a.handleFetchError)},a.handleFetchSuccess=function(e){if(0===e.total_results)return a.setState({viewState:ee.NO_RESULTS});var t=[].concat(Object(w.a)(a.state.movies),Object(w.a)(e.results.map(function(e){return new _(e)})));a.setState({movies:t,totalResults:e.total_results,totalPages:e.total_pages,viewState:ee.NORMAL_VIEW})},a.handleFetchError=function(e){a.setState({viewState:ee.SERVER_ERROR})},a.getNextPage=function(){var e=a.state,t=e.totalPages,n=e.currentPage;t&&n>=t||a.setState(function(e,t){return{currentPage:e.currentPage+1}},function(){a.fetchDate()})},a.handleLoadMore=function(e){a.getNextPage()},a.getMovieSizeFromPattern=function(e){var t=e%ae.length;return ae[t]},a.onMovieSelect=function(e,t){a.setState({selectedMovie:e,selectedMoviePosition:t})},a.deselectMovie=function(){a.setState({selectedMovie:te.selectedMovie,selectedMoviePosition:te.selectedMoviePosition})},a.renderSelectedMovie=function(){var e=a.state,t=e.selectedMovie,n=e.selectedMoviePosition;return null!==t?r.a.createElement(Z,{movie:t,starterPosition:n,onMovieDetailsClose:a.deselectMovie}):null},a.renderGhostLoading=function(e){return e?ae.map(function(e,t){return r.a.createElement(P,{key:t})}):null},a.renderNormal=function(e){var t=a.state.movies;return r.a.createElement(r.a.Fragment,null,a.renderSelectedMovie(),r.a.createElement("div",{className:"md-container no-gutters"},r.a.createElement("div",{className:"md-list"},t.map(function(e,t){return r.a.createElement(M,{onMovieSelect:a.onMovieSelect,size:a.getMovieSizeFromPattern(t),movie:e,key:t})}),a.renderGhostLoading(e),r.a.createElement("div",{className:"clear-fix"}))),e?r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{className:"md-button",onClick:a.handleLoadMore},"Loading...")):null)},a.renderServerError=function(){return r.a.createElement("div",{className:"md-container no-gutters"},r.a.createElement("div",{className:"md-paragraph"},"Server Error! Something went wrong. Please try again later.."))},a.renderNoResults=function(){return r.a.createElement("div",{className:"md-container no-gutters"},r.a.createElement("div",{className:"md-paragraph"},"No results Found..."))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.onRef(this),this.fetchDate()}},{key:"componentWillUnmount",value:function(){this.props.onRef(null)}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState(te,function(){return t.fetchDate()})}},{key:"render",value:function(){var e=this.state.viewState;return e===ee.SERVER_ERROR?this.renderServerError():e===ee.NO_RESULTS?this.renderNoResults():this.renderNormal(e===ee.LOADING)}}]),t}(n.Component),re=(a(24),a(25),600),ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={searchQuery:""},a.handleSubmit=function(e){e.preventDefault(),clearTimeout(a.timer),a.notifyOnQueryChange()},a.handleOnChange=function(e){clearTimeout(a.timer),a.setState({searchQuery:e.target.value},function(){return a.timer=setTimeout(a.notifyOnQueryChange,re)})},a.notifyOnQueryChange=function(){a.props.onQueryChange(a.state.searchQuery)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmmount",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.state.searchQuery;return r.a.createElement("form",{className:"search-box-form",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"md-input search-box",autoComplete:"off",placeholder:"Search for a movie, tv show, person...",onChange:this.handleOnChange,type:"text",id:"searchQuery",value:e}))}}]),t}(n.Component),oe=function(e){var t=r.a.createElement("div",null,r.a.createElement("div",{className:"brand-name"},"MovieRama"),r.a.createElement(ie,{onQueryChange:e.onSearchQueryChange}));return r.a.createElement("div",{className:"md-header header-component-container"},t,r.a.createElement("div",{className:"md-header-content-fixed header-component-container-fixed"},r.a.createElement("div",{className:"md-container"},t)))},ce=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={movieQuery:"",isSearchView:!1},a.handleOnQueryChange=function(e){var t=null!=e&&""!==e;a.setState({movieQuery:e,isSearchView:t})},a.handleOnScroll=function(e){var t=e.currentTarget;t.scrollHeight-t.scrollTop===t.clientHeight&&a.movieList&&"function"===typeof a.movieList.getNextPage&&a.movieList.getNextPage()},a.renderSearchResults=function(){var e=a.state.movieQuery;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"md-container no-gutters"},r.a.createElement("div",{className:"md-sub-title"},"Search for ",r.a.createElement("i",null,"'",e,"'"))),r.a.createElement(ne,{fetchType:$.SEARCH,fetchFunc:S,fetchParams:{query:e},onRef:function(e){return a.movieList=e}}))},a.renderNowPlaying=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"md-container no-gutters"},r.a.createElement("div",{className:"md-sub-title"},"Now In Theaters")),r.a.createElement(ne,{fetchType:$.NOW_PLAYING,fetchFunc:b,fetchParams:{},onRef:function(e){return a.movieList=e}}))},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.isSearchView;return r.a.createElement("div",{className:"md-page-container",onScroll:this.handleOnScroll},r.a.createElement(oe,{onSearchQueryChange:this.handleOnQueryChange}),!0===e?this.renderSearchResults():null,!1===e?this.renderNowPlaying():null)}}]),t}(n.Component),se=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){N(h).then(function(e){j.emit(k,e.genres)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,null))}}]),t}(n.Component);o.a.render(r.a.createElement(se,null),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.1c88f180.chunk.js.map